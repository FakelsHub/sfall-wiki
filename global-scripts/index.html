<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Глобальные сценарии - sfall - Scripting</title> <link rel="shortcut icon" href="/sfall-wiki/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/sfall-wiki/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/sfall-wiki/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/sfall-wiki/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.3.0 --> <title>Глобальные сценарии | sfall - Scripting</title> <meta property="og:title" content="Глобальные сценарии" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="sfall functions documentation" /> <meta property="og:description" content="sfall functions documentation" /> <link rel="canonical" href="/sfall-wiki/global-scripts/" /> <meta property="og:url" content="/sfall-wiki/global-scripts/" /> <meta property="og:site_name" content="sfall - Scripting" /> <script type="application/ld+json"> {"@type":"WebPage","image":null,"url":"/sfall-wiki/global-scripts/","publisher":null,"author":null,"headline":"Глобальные сценарии","dateModified":null,"datePublished":null,"sameAs":null,"description":"sfall functions documentation","mainEntityOfPage":null,"name":null,"@context":"http://schema.org"}</script> <!-- End Jekyll SEO tag --> <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png"> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png"> <link rel="manifest" href="/assets/favicon/site.webmanifest"> <link rel="mask-icon" href="/assets/favicon/safari-pinned-tab.svg" color="#5bbad5"> <meta name="msapplication-TileColor" content="#da532c"> <meta name="msapplication-config" content="/assets/favicon/browserconfig.xml"> <meta name="theme-color" content="#ffffff"> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/sfall-wiki/" class="site-title lh-tight"> sfall - Scripting </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/sfall-wiki/" class="nav-list-link">Документация</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/sfall-wiki/data-types/" class="nav-list-link">Типы данных</a><ul class="nav-list"><li class="nav-list-item "> <a href="/sfall-wiki/functions/" class="nav-list-link">Функции</a> </li></ul></li><li class="nav-list-item "><a href="/sfall-wiki/sslc/" class="nav-list-link">Компилятор (sslc)</a></li><li class="nav-list-item "><a href="/sfall-wiki/optimization/" class="nav-list-link">Оптимизация</a></li><li class="nav-list-item "><a href="/sfall-wiki/best-practices/" class="nav-list-link">Практические советы</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/sfall-wiki/global-scripts/" class="nav-list-link active">Глобальные сценарии</a><ul class="nav-list "><li class="nav-list-item "><a href="/sfall-wiki/global-functions/" class="nav-list-link">Функции глобальных скриптов</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/sfall-wiki/arrays/" class="nav-list-link">Массивы</a><ul class="nav-list "><li class="nav-list-item "><a href="/sfall-wiki/array-functions/" class="nav-list-link">Функции массивов</a></li><li class="nav-list-item "><a href="/sfall-wiki/lists/" class="nav-list-link">Списки (Lists)</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/sfall-wiki/hooks/" class="nav-list-link">Hooks</a><ul class="nav-list "><li class="nav-list-item "><a href="/sfall-wiki/hook-functions/" class="nav-list-link">Hook functions</a></li><li class="nav-list-item "><a href="/sfall-wiki/hook-types/" class="nav-list-link">Hook types</a></li></ul></li><li class="nav-list-item"><a href="/sfall-wiki/funcx-macros/" class="nav-list-link">FuncX macros</a></li><li class="nav-list-item"><a href="/sfall-wiki/global-variables/" class="nav-list-link">Global variables</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/sfall-wiki/interface/" class="nav-list-link">Interface</a><ul class="nav-list "><li class="nav-list-item "><a href="/sfall-wiki/cursor/" class="nav-list-link">Cursor</a></li><li class="nav-list-item "><a href="/sfall-wiki/inventory/" class="nav-list-link">Inventory</a></li><li class="nav-list-item "><a href="/sfall-wiki/main-interface/" class="nav-list-link">Main interface</a></li><li class="nav-list-item "><a href="/sfall-wiki/outline/" class="nav-list-link">Outline</a></li><li class="nav-list-item "><a href="/sfall-wiki/pip-boy/" class="nav-list-link">Pip-Boy</a></li><li class="nav-list-item "><a href="/sfall-wiki/tags/" class="nav-list-link">Tags</a></li><li class="nav-list-item "><a href="/sfall-wiki/windows-and-images/" class="nav-list-link">Windows and images</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/sfall-wiki/script-functions/" class="nav-list-link">Функции скриптов</a><ul class="nav-list "><li class="nav-list-item "><a href="/sfall-wiki/animations/" class="nav-list-link">Animations</a></li><li class="nav-list-item "><a href="/sfall-wiki/art/" class="nav-list-link">Art</a></li><li class="nav-list-item "><a href="/sfall-wiki/car/" class="nav-list-link">Car</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/sfall-wiki/combat/" class="nav-list-link">Combat</a><ul class="nav-list"><li class="nav-list-item "> <a href="/sfall-wiki/knockback/" class="nav-list-link">Knockback</a> </li><li class="nav-list-item "> <a href="/sfall-wiki/weapons-and-ammo/" class="nav-list-link">Weapons and Ammo</a> </li></ul></li><li class="nav-list-item "><a href="/sfall-wiki/explosions/" class="nav-list-link">Explosions</a></li><li class="nav-list-item "><a href="/sfall-wiki/ini-settings/" class="nav-list-link">INI settings</a></li><li class="nav-list-item "><a href="/sfall-wiki/keyboard-and-mouse/" class="nav-list-link">Keyboard and Mouse</a></li><li class="nav-list-item "><a href="/sfall-wiki/locks/" class="nav-list-link">Locks</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/sfall-wiki/maps-and-encounters/" class="nav-list-link">Maps and Encounters</a><ul class="nav-list"><li class="nav-list-item "> <a href="/sfall-wiki/rest/" class="nav-list-link">Rest</a> </li><li class="nav-list-item "> <a href="/sfall-wiki/worldmap/" class="nav-list-link">Worldmap</a> </li></ul></li><li class="nav-list-item "><a href="/sfall-wiki/maths/" class="nav-list-link">Математика</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/sfall-wiki/misc/" class="nav-list-link">Разное</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="/sfall-wiki/objects-and-scripts/" class="nav-list-link">Objects and scripts</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/sfall-wiki/perks-and-traits/" class="nav-list-link">Perks and Traits</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="/sfall-wiki/shaders/" class="nav-list-link">Shaders</a></li><li class="nav-list-item "><a href="/sfall-wiki/skills/" class="nav-list-link">Skills</a></li><li class="nav-list-item "><a href="/sfall-wiki/sound/" class="nav-list-link">Sound</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/sfall-wiki/stats/" class="nav-list-link">Stats</a><ul class="nav-list"><li class="nav-list-item "> <a href="/sfall-wiki/stats-min-max/" class="nav-list-link">Stats min/max</a> </li></ul></li><li class="nav-list-item "><a href="/sfall-wiki/strings/" class="nav-list-link">Strings</a></li><li class="nav-list-item "><a href="/sfall-wiki/tiles-and-paths/" class="nav-list-link">Tiles and Paths</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/sfall-wiki/sfall/" class="nav-list-link">Sfall</a><ul class="nav-list "><li class="nav-list-item "><a href="/sfall-wiki/version/" class="nav-list-link">Version</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/sfall-wiki/system-functions/" class="nav-list-link">Системные функции</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/sfall-wiki/direct-memory-access/" class="nav-list-link">Direct memory access</a><ul class="nav-list"><li class="nav-list-item "> <a href="/sfall-wiki/calls/" class="nav-list-link">Calls</a> </li><li class="nav-list-item "> <a href="/sfall-wiki/read/" class="nav-list-link">Read</a> </li><li class="nav-list-item "> <a href="/sfall-wiki/write/" class="nav-list-link">Write</a> </li></ul></li><li class="nav-list-item "><a href="/sfall-wiki/virtual-file-system/" class="nav-list-link">Virtual file system</a></li></ul></li><li class="nav-list-item"><a href="/sfall-wiki/variables/" class="nav-list-link">Variables</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search sfall - Scripting" aria-label="Search sfall - Scripting" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://nma-fallout.com/threads/fo2-engine-tweaks-sfall.178390/" class="site-button" > Forum </a> </li> <li class="aux-nav-list-item"> <a href="https://github.com/FakelsHub/sFall-Extended" class="site-button" > GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 id="global-scripts"> <a href="#global-scripts" class="anchor-heading" aria-labelledby="global-scripts"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Global scripts </h1> <p>As well as the new functions, sfall also adds global scripts. These run independent of any loaded maps, but do not have an attached object. (i.e. using <code class="highlighter-rouge">self_obj</code> without using <code class="highlighter-rouge">set_self</code> first will crash the script.) To use a global script, the script must have a name which begins with <code class="highlighter-rouge">gl</code> and contains a procedure called <code class="highlighter-rouge">start</code>, <code class="highlighter-rouge">map_enter_p_proc</code>, <code class="highlighter-rouge">map_exit_p_proc</code>, or <code class="highlighter-rouge">map_update_p_proc</code>. The start procedure will be executed once when the player loads a saved game or starts a new game. The <code class="highlighter-rouge">map_*_p_proc</code> procedures will be executed once when a map is being entered/left/updated. If you wish the script to be executed repeatedly, call <code class="highlighter-rouge">set_global_script_repeat</code> on the first run of the start procedure using the number of frames between each run as the argument. (0 disables the script, 1 runs it every frame, 2 runs it every other frame etc.)</p> <p>Global scripts have multiple modes, which can be set using the <code class="highlighter-rouge">set_global_script_type</code> function.</p> <ul> <li>In the default mode (i.e. mode 0) their execution is linked to the local map game loop, so the script will not run in dialogs or on the world map. [Using mode 1 requires the input wrapper to be enabled. Use <code class="highlighter-rouge">available_global_script_types</code> to check what is available.] - Obsolete.</li> <li>In mode 1 their execution is linked to the player input, and so they will run whenever the mouse cursor is visible on screen, including the world map, character dialogs etc.</li> <li>In mode 2, execution is linked to the world map loop, so the script will only be executed on the world map and not on the local map or in any dialog windows.</li> <li>Mode 3 is a combination of modes 0 and 2, so scripts will be executed on both local maps and the world map, but not in dialog windows.</li> </ul> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
